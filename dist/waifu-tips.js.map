{"version":3,"file":"waifu-tips.js","sources":["../build/utils.js","../build/message.js","../build/logger.js","../build/model.js","../build/tools.js","../build/icons.js","../build/widget.js","../build/drag.js","../build/waifu-tips.js"],"sourcesContent":["function randomSelection(obj) {\n    return Array.isArray(obj) ? obj[Math.floor(Math.random() * obj.length)] : obj;\n}\nfunction randomOtherOption(total, excludeIndex) {\n    const idx = Math.floor(Math.random() * (total - 1));\n    return idx >= excludeIndex ? idx + 1 : idx;\n}\nfunction loadExternalResource(url, type) {\n    return new Promise((resolve, reject) => {\n        let tag;\n        if (type === 'css') {\n            tag = document.createElement('link');\n            tag.rel = 'stylesheet';\n            tag.href = url;\n        }\n        else if (type === 'js') {\n            tag = document.createElement('script');\n            tag.src = url;\n        }\n        if (tag) {\n            tag.onload = () => resolve(url);\n            tag.onerror = () => reject(url);\n            document.head.appendChild(tag);\n        }\n    });\n}\nexport { randomSelection, loadExternalResource, randomOtherOption };\n","import { randomSelection } from './utils.js';\nlet messageTimer = null;\nfunction showMessage(text, timeout, priority, override = true) {\n    let currentPriority = parseInt(sessionStorage.getItem('waifu-message-priority'), 10);\n    if (isNaN(currentPriority)) {\n        currentPriority = 0;\n    }\n    if (!text ||\n        (override && currentPriority > priority) ||\n        (!override && currentPriority >= priority))\n        return;\n    if (messageTimer) {\n        clearTimeout(messageTimer);\n        messageTimer = null;\n    }\n    text = randomSelection(text);\n    sessionStorage.setItem('waifu-message-priority', String(priority));\n    const tips = document.getElementById('waifu-tips');\n    tips.innerHTML = text;\n    tips.classList.add('waifu-tips-active');\n    messageTimer = setTimeout(() => {\n        sessionStorage.removeItem('waifu-message-priority');\n        tips.classList.remove('waifu-tips-active');\n    }, timeout);\n}\nexport { showMessage };\n","class Logger {\n    constructor(level = 'info') {\n        this.level = level;\n    }\n    setLevel(level) {\n        if (!level)\n            return;\n        this.level = level;\n    }\n    shouldLog(level) {\n        return Logger.levelOrder[level] <= Logger.levelOrder[this.level];\n    }\n    error(message, ...args) {\n        if (this.shouldLog('error')) {\n            console.error('[Live2D Widget][ERROR]', message, ...args);\n        }\n    }\n    warn(message, ...args) {\n        if (this.shouldLog('warn')) {\n            console.warn('[Live2D Widget][WARN]', message, ...args);\n        }\n    }\n    info(message, ...args) {\n        if (this.shouldLog('info')) {\n            console.log('[Live2D Widget][INFO]', message, ...args);\n        }\n    }\n    trace(message, ...args) {\n        if (this.shouldLog('trace')) {\n            console.log('[Live2D Widget][TRACE]', message, ...args);\n        }\n    }\n}\nLogger.levelOrder = {\n    error: 0,\n    warn: 1,\n    info: 2,\n    trace: 3,\n};\nconst logger = new Logger();\nexport default logger;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { showMessage } from './message.js';\nimport { loadExternalResource } from './utils.js';\nimport logger from './logger.js';\nclass ModelManager {\n    constructor(config) {\n        const { cubism2Path, cubism5Path } = config;\n        this.modelPath = config.modelPath || '';\n        if (this.modelPath && !this.modelPath.endsWith('/')) {\n            this.modelPath += '/';\n        }\n        this.modelSetting = config.modelSetting || '';\n        this.cubism2Path = cubism2Path || '';\n        this.cubism5Path = cubism5Path || '';\n        this.currentModelVersion = 0;\n        this.loading = false;\n        this.modelJSON = {};\n    }\n    static newInstance(config) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ModelManager(config);\n        });\n    }\n    resetCanvas() {\n        document.getElementById('waifu-canvas').innerHTML = '<canvas id=\"live2d\" width=\"800\" height=\"800\"></canvas>';\n    }\n    fetchWithCache(jsonPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let result;\n            if (jsonPath in this.modelJSON) {\n                result = this.modelJSON[jsonPath];\n            }\n            else {\n                try {\n                    const response = yield fetch(jsonPath);\n                    result = yield response.json();\n                }\n                catch (_a) {\n                    result = null;\n                }\n                this.modelJSON[jsonPath] = result;\n            }\n            return result;\n        });\n    }\n    checkModelVersion(modelSetting) {\n        if (modelSetting.Version === 3 || modelSetting.FileReferences) {\n            return 3;\n        }\n        return 2;\n    }\n    loadLive2D(modelSettingPath, modelSetting) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.loading) {\n                logger.warn('Still loading. Abort.');\n                return;\n            }\n            this.loading = true;\n            try {\n                const version = this.checkModelVersion(modelSetting);\n                if (version === 2) {\n                    if (!this.cubism2model) {\n                        if (!this.cubism2Path) {\n                            logger.error('No cubism2Path set, cannot load Cubism 2 Core.');\n                            return;\n                        }\n                        yield loadExternalResource(this.cubism2Path, 'js');\n                        const { default: Cubism2Model } = yield import('./cubism2/index.js');\n                        this.cubism2model = new Cubism2Model();\n                    }\n                    if (this.currentModelVersion === 3) {\n                        this.cubism5model.release();\n                        this.resetCanvas();\n                    }\n                    if (this.currentModelVersion === 3 || !this.cubism2model.gl) {\n                        yield this.cubism2model.init('live2d', modelSettingPath, modelSetting);\n                    }\n                    else {\n                        yield this.cubism2model.changeModelWithJSON(modelSettingPath, modelSetting);\n                    }\n                }\n                else {\n                    if (!this.cubism5Path) {\n                        logger.error('No cubism5Path set, cannot load Cubism 5 Core.');\n                        return;\n                    }\n                    yield loadExternalResource(this.cubism5Path, 'js');\n                    const { AppDelegate: Cubism5Model } = yield import('./cubism5/index.js');\n                    this.cubism5model = new Cubism5Model();\n                    if (this.currentModelVersion === 2) {\n                        this.cubism2model.destroy();\n                        this.resetCanvas();\n                    }\n                    if (this.currentModelVersion === 2 || !this.cubism5model.subdelegates.at(0)) {\n                        this.cubism5model.initialize();\n                        this.cubism5model.changeModel(modelSettingPath);\n                        this.cubism5model.run();\n                    }\n                    else {\n                        this.cubism5model.changeModel(modelSettingPath);\n                    }\n                }\n                logger.info(`Model ${modelSettingPath} (Cubism version ${version}) loaded`);\n                this.currentModelVersion = version;\n            }\n            catch (err) {\n                console.error('loadLive2D failed', err);\n            }\n            this.loading = false;\n        });\n    }\n    loadModel(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const modelSettingJson = yield this.fetchWithCache(this.modelPath + this.modelSetting);\n            yield this.loadLive2D(this.modelPath, modelSettingJson);\n            showMessage(message, 4000, 10);\n        });\n    }\n}\nexport { ModelManager };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { fa_comment, fa_paper_plane, fa_info_circle, fa_xmark } from './icons.js';\nclass ToolsManager {\n    constructor() {\n        this.tools = [\n            {\n                name: 'chat',\n                icon: fa_comment,\n                callback: () => __awaiter(this, void 0, void 0, function* () { })\n            },\n            {\n                name: 'AsteroidsGame',\n                icon: fa_paper_plane,\n                callback: () => {\n                    if (window.Asteroids) {\n                        if (!window.ASTEROIDSPLAYERS)\n                            window.ASTEROIDSPLAYERS = [];\n                        window.ASTEROIDSPLAYERS.push(new window.Asteroids());\n                    }\n                    else {\n                        const script = document.createElement('script');\n                        script.src =\n                            'https://fastly.jsdelivr.net/gh/stevenjoezhang/asteroids/asteroids.js';\n                        document.head.appendChild(script);\n                    }\n                }\n            },\n            {\n                name: 'Info',\n                icon: fa_info_circle,\n                callback: () => {\n                    open('https://github.com/zuolingxu/Interactive-Schedule-Planner');\n                }\n            },\n            {\n                name: 'Quit',\n                icon: fa_xmark,\n                callback: () => {\n                    localStorage.setItem('waifu-display', Date.now().toString());\n                    const waifu = document.getElementById('waifu');\n                    if (!waifu)\n                        return;\n                    waifu.classList.remove('waifu-active');\n                    setTimeout(() => {\n                        waifu.classList.add('waifu-hidden');\n                        const waifuToggle = document.getElementById('waifu-toggle');\n                        waifuToggle === null || waifuToggle === void 0 ? void 0 : waifuToggle.classList.add('waifu-toggle-active');\n                    }, 0);\n                }\n            }\n        ];\n    }\n    addElement(pos, name, icon, callback) {\n        const element = document.createElement('span');\n        element.id = `waifu-tool-${pos}`;\n        element.title = name;\n        element.innerHTML = icon;\n        element.addEventListener('click', callback);\n        const toolContainer = document.getElementById('waifu-tool');\n        if (!toolContainer)\n            return element;\n        const nextTool = document.getElementById(`waifu-tool-${pos + 1}`);\n        toolContainer.insertBefore(element, nextTool || null);\n        return element;\n    }\n    deleteElement(pos) {\n        const element = document.getElementById(`waifu-tool-${pos}`);\n        if (element) {\n            element.remove();\n        }\n        else {\n            console.warn(`Element with id waifu-tool-${pos} not found.`);\n        }\n    }\n    loadTools() {\n        for (let i = 0; i < this.tools.length; i++) {\n            const { name, icon, callback } = this.tools[i];\n            this.addElement(i, name, icon, callback);\n        }\n    }\n    static changeTool(instance, pos, new_tool) {\n        if (instance.tools[pos]) {\n            console.log(`Overwriting tool at position ${pos}, previously: ${instance.tools[pos].name}`);\n        }\n        instance.tools[pos] = new_tool;\n        instance.deleteElement(pos);\n        instance.addElement(pos, new_tool.name, new_tool.icon, new_tool.callback);\n    }\n    static removeTool(instance, pos) {\n        instance.deleteElement(pos);\n    }\n    static addTool(instance, pos, new_tool) {\n        if (instance.tools[pos]) {\n            console.warn(`Tool at position ${pos} already exists, overwriting.`);\n        }\n        instance.tools[pos] = new_tool;\n        instance.addElement(pos, new_tool.name, new_tool.icon, new_tool.callback);\n    }\n}\nexport { ToolsManager };\n","const fa_comment = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d=\"M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c0 0 0 0 0 0s0 0 0 0s0 0 0 0c0 0 0 0 0 0l.3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z\"/></svg>';\nconst fa_paper_plane = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d=\"M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480l0-83.6c0-4 1.5-7.8 4.2-10.8L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z\"/></svg>';\nconst fa_info_circle = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z\"/></svg>';\nconst fa_xmark = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/></svg>';\nconst fa_child = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc. --><path d=\"M96 64a64 64 0 1 1 128 0A64 64 0 1 1 96 64zm48 320l0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-192.2L59.1 321c-9.4 15-29.2 19.4-44.1 10S-4.5 301.9 4.9 287l39.9-63.3C69.7 184 113.2 160 160 160s90.3 24 115.2 63.6L315.1 287c9.4 15 4.9 34.7-10 44.1s-34.7 4.9-44.1-10L240 287.8 240 480c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-96-32 0z\"/></svg>';\nexport { fa_comment, fa_paper_plane, fa_info_circle, fa_xmark, fa_child };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ModelManager } from './model.js';\nimport { ToolsManager } from './tools.js';\nimport logger from './logger.js';\nimport registerDrag from './drag.js';\nimport { fa_child } from './icons.js';\nfunction loadWidget(config) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a;\n        localStorage.removeItem('waifu-display');\n        sessionStorage.removeItem('waifu-message-priority');\n        document.body.insertAdjacentHTML('beforeend', `<div id=\"waifu\">\r\n       <div id=\"waifu-tips\"></div>\r\n       <div id=\"waifu-canvas\">\r\n         <canvas id=\"live2d\" width=\"800\" height=\"800\"></canvas>\r\n       </div>\r\n       <div id=\"waifu-tool\"></div>\r\n     </div>`);\n        const model = yield ModelManager.newInstance(config);\n        yield model.loadModel('');\n        const tools = new ToolsManager();\n        tools.loadTools();\n        if (config.drag)\n            registerDrag();\n        (_a = document.getElementById('waifu')) === null || _a === void 0 ? void 0 : _a.classList.add('waifu-active');\n        return { 'ModelManager': model, 'ToolsManager': tools };\n    });\n}\nfunction initWidget(config) {\n    let globals;\n    if (typeof config === 'string') {\n        logger.error('Your config for Live2D initWidget is outdated. Please refer to https://github.com/stevenjoezhang/live2d-widget/blob/master/dist/autoload.js');\n        return;\n    }\n    document.body.insertAdjacentHTML('beforeend', `<div id=\"waifu-toggle\">\r\n       ${fa_child}\r\n     </div>`);\n    const toggle = document.getElementById('waifu-toggle');\n    toggle === null || toggle === void 0 ? void 0 : toggle.addEventListener('click', () => {\n        var _a;\n        toggle === null || toggle === void 0 ? void 0 : toggle.classList.remove('waifu-toggle-active');\n        if (toggle === null || toggle === void 0 ? void 0 : toggle.getAttribute('first-time')) {\n            logger.info('First time toggle clicked, loading widget...');\n            globals = loadWidget(config);\n            toggle === null || toggle === void 0 ? void 0 : toggle.removeAttribute('first-time');\n        }\n        else {\n            localStorage.removeItem('waifu-display');\n            (_a = document.getElementById('waifu')) === null || _a === void 0 ? void 0 : _a.classList.remove('waifu-hidden');\n            setTimeout(() => {\n                var _a;\n                (_a = document.getElementById('waifu')) === null || _a === void 0 ? void 0 : _a.classList.add('waifu-active');\n            }, 0);\n        }\n    });\n    if (localStorage.getItem('waifu-display') &&\n        Date.now() - Number(localStorage.getItem('waifu-display')) <= 86400000) {\n        toggle === null || toggle === void 0 ? void 0 : toggle.setAttribute('first-time', 'true');\n        setTimeout(() => {\n            toggle === null || toggle === void 0 ? void 0 : toggle.classList.add('waifu-toggle-active');\n        }, 0);\n    }\n    else {\n        logger.info('Loading widget without first-time toggle');\n        globals = loadWidget(config);\n    }\n    return globals;\n}\nexport { initWidget };\n","function registerDrag() {\n    const element = document.getElementById('waifu');\n    if (!element)\n        return;\n    let winWidth = window.innerWidth, winHeight = window.innerHeight;\n    const imgWidth = element.offsetWidth, imgHeight = element.offsetHeight;\n    element.addEventListener('mousedown', event => {\n        if (event.button === 2) {\n            return;\n        }\n        const canvas = document.getElementById('live2d');\n        if (event.target !== canvas)\n            return;\n        event.preventDefault();\n        const _offsetX = event.offsetX, _offsetY = event.offsetY;\n        document.onmousemove = event => {\n            const _x = event.clientX, _y = event.clientY;\n            let _left = _x - _offsetX, _top = _y - _offsetY;\n            if (_top < 0) {\n                _top = 0;\n            }\n            else if (_top >= winHeight - imgHeight) {\n                _top = winHeight - imgHeight;\n            }\n            if (_left < 0) {\n                _left = 0;\n            }\n            else if (_left >= winWidth - imgWidth) {\n                _left = winWidth - imgWidth;\n            }\n            element.style.top = _top + 'px';\n            element.style.left = _left + 'px';\n        };\n        document.onmouseup = () => {\n            document.onmousemove = null;\n        };\n    });\n    window.onresize = () => {\n        winWidth = window.innerWidth;\n        winHeight = window.innerHeight;\n    };\n}\nexport default registerDrag;\n","import { initWidget } from './widget';\nimport { ToolsManager } from './tools.js';\nimport { showMessage } from './message.js';\nwindow.initWidget = initWidget;\nwindow.changeTool = ToolsManager.changeTool;\nwindow.addTool = ToolsManager.addTool;\nwindow.removeTool = ToolsManager.removeTool;\nwindow.showMessage = showMessage;\n"],"names":["loadExternalResource","url","type","Promise","resolve","reject","tag","document","createElement","src","onload","onerror","head","appendChild","messageTimer","showMessage","text","timeout","priority","override","currentPriority","parseInt","sessionStorage","getItem","isNaN","obj","clearTimeout","Array","isArray","Math","floor","random","length","setItem","String","tips","getElementById","innerHTML","classList","add","setTimeout","removeItem","remove","Logger","constructor","level","this","setLevel","shouldLog","levelOrder","error","message","args","console","warn","info","log","trace","logger","__awaiter","thisArg","_arguments","P","generator","fulfilled","value","step","next","e","rejected","result","done","then","apply","ModelManager","config","cubism2Path","cubism5Path","modelPath","endsWith","modelSetting","currentModelVersion","loading","modelJSON","newInstance","resetCanvas","fetchWithCache","jsonPath","response","fetch","json","_a","checkModelVersion","Version","FileReferences","loadLive2D","modelSettingPath","version","cubism2model","default","Cubism2Model","import","cubism5model","release","gl","changeModelWithJSON","init","AppDelegate","Cubism5Model","destroy","subdelegates","at","changeModel","initialize","run","err","loadModel","modelSettingJson","ToolsManager","tools","name","icon","callback","window","Asteroids","ASTEROIDSPLAYERS","push","script","open","localStorage","Date","now","toString","waifu","waifuToggle","addElement","pos","element","id","title","addEventListener","toolContainer","nextTool","insertBefore","deleteElement","loadTools","i","changeTool","instance","new_tool","removeTool","addTool","loadWidget","body","insertAdjacentHTML","model","drag","winWidth","innerWidth","winHeight","innerHeight","imgWidth","offsetWidth","imgHeight","offsetHeight","event","button","canvas","target","preventDefault","_offsetX","offsetX","_offsetY","offsetY","onmousemove","_x","clientX","_y","clientY","_left","_top","style","top","left","onmouseup","onresize","registerDrag","initWidget","globals","toggle","getAttribute","removeAttribute","Number","setAttribute"],"mappings":";;;;AAOA,SAASA,EAAqBC,EAAKC,GAC/B,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACzB,IAAIC,EAOAA,EAAMC,SAASC,cAAc,UAC7BF,EAAIG,IAAMR,EAEVK,IACAA,EAAII,OAAS,IAAMN,EAAQH,GAC3BK,EAAIK,QAAU,IAAMN,EAAOJ,GAC3BM,SAASK,KAAKC,YAAYP,MAGtC,CCxBA,IAAIQ,EAAe,KACnB,SAASC,EAAYC,EAAMC,EAASC,EAAUC,GAAW,GACrD,IAAIC,EAAkBC,SAASC,eAAeC,QAAQ,0BAA2B,IAIjF,GAHIC,MAAMJ,KACNA,EAAkB,IAEjBJ,GACAG,GAAYC,EAAkBF,IAC7BC,GAAYC,GAAmBF,EACjC,ODVR,IAAyBO,ECWjBX,IACAY,aAAaZ,GACbA,EAAe,MDbEW,ECeET,EAAvBA,EDdOW,MAAMC,QAAQH,GAAOA,EAAII,KAAKC,MAAMD,KAAKE,SAAWN,EAAIO,SAAWP,ECe1EH,eAAeW,QAAQ,yBAA0BC,OAAOhB,IACxD,MAAMiB,EAAO5B,SAAS6B,eAAe,cACrCD,EAAKE,UAAYrB,EACjBmB,EAAKG,UAAUC,IAAI,qBACnBzB,EAAe0B,YAAW,KACtBlB,eAAemB,WAAW,0BAC1BN,EAAKG,UAAUI,OAAO,uBACvBzB,EACP,CCxBA,MAAM0B,EACF,WAAAC,CAAYC,EAAQ,QAChBC,KAAKD,MAAQA,CACrB,CACI,QAAAE,CAASF,GACAA,IAELC,KAAKD,MAAQA,EACrB,CACI,SAAAG,CAAUH,GACN,OAAOF,EAAOM,WAAWJ,IAAUF,EAAOM,WAAWH,KAAKD,MAClE,CACI,KAAAK,CAAMC,KAAYC,GACVN,KAAKE,UAAU,UACfK,QAAQH,MAAM,yBAA0BC,KAAYC,EAEhE,CACI,IAAAE,CAAKH,KAAYC,GACTN,KAAKE,UAAU,SACfK,QAAQC,KAAK,wBAAyBH,KAAYC,EAE9D,CACI,IAAAG,CAAKJ,KAAYC,GACTN,KAAKE,UAAU,SACfK,QAAQG,IAAI,wBAAyBL,KAAYC,EAE7D,CACI,KAAAK,CAAMN,KAAYC,GACVN,KAAKE,UAAU,UACfK,QAAQG,IAAI,yBAA0BL,KAAYC,EAE9D,EAEAT,EAAOM,WAAa,CAChBC,MAAO,EACPI,KAAM,EACNC,KAAM,EACNE,MAAO,GAEN,MAACC,EAAS,IAAIf,ECvCnB,IAAIgB,EAAab,MAAQA,KAAKa,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAI3D,WAAU,SAAUC,EAASC,GAC/C,SAAS2D,EAAUC,GAAS,IAAMC,EAAKH,EAAUI,KAAKF,GAAU,CAAC,MAAOG,GAAK/D,EAAO+D,EAAK,CAAA,CACzF,SAASC,EAASJ,GAAS,IAAMC,EAAKH,EAAiB,MAAEE,GAAU,CAAC,MAAOG,GAAK/D,EAAO+D,EAAK,CAAA,CAC5F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOnE,EAAQkE,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBH,EAAIG,EAAQ,IAAIH,GAAE,SAAU1D,GAAWA,EAAQ6D,EAAS,KAIlBO,KAAKR,EAAWK,EAAU,CAC5GH,GAAMH,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKM,OACtE,GACA,EAIA,MAAMO,EACF,WAAA9B,CAAY+B,GACR,MAAMC,YAAEA,EAAWC,YAAEA,GAAgBF,EACrC7B,KAAKgC,UAAYH,EAAOG,WAAa,GACjChC,KAAKgC,YAAchC,KAAKgC,UAAUC,SAAS,OAC3CjC,KAAKgC,WAAa,KAEtBhC,KAAKkC,aAAeL,EAAOK,cAAgB,GAC3ClC,KAAK8B,YAAcA,GAAe,GAClC9B,KAAK+B,YAAcA,GAAe,GAClC/B,KAAKmC,oBAAsB,EAC3BnC,KAAKoC,SAAU,EACfpC,KAAKqC,UAAY,CAAE,CAC3B,CACI,kBAAOC,CAAYT,GACf,OAAOhB,EAAUb,UAAM,OAAQ,GAAQ,YACnC,OAAO,IAAI4B,EAAaC,EACpC,GACA,CACI,WAAAU,GACI9E,SAAS6B,eAAe,gBAAgBC,UAAY,wDAC5D,CACI,cAAAiD,CAAeC,GACX,OAAO5B,EAAUb,UAAM,OAAQ,GAAQ,YACnC,IAAIwB,EACJ,GAAIiB,KAAYzC,KAAKqC,UACjBb,EAASxB,KAAKqC,UAAUI,OAEvB,CACD,IACI,MAAMC,QAAiBC,MAAMF,GAC7BjB,QAAekB,EAASE,MAC5C,CACgB,MAAOC,GACHrB,EAAS,IAC7B,CACgBxB,KAAKqC,UAAUI,GAAYjB,CAC3C,CACY,OAAOA,CACnB,GACA,CACI,iBAAAsB,CAAkBZ,GACd,OAA6B,IAAzBA,EAAaa,SAAiBb,EAAac,eACpC,EAEJ,CACf,CACI,UAAAC,CAAWC,EAAkBhB,GACzB,OAAOrB,EAAUb,UAAM,OAAQ,GAAQ,YACnC,GAAIA,KAAKoC,QACLxB,EAAOJ,KAAK,6BADhB,CAIAR,KAAKoC,SAAU,EACf,IACI,MAAMe,EAAUnD,KAAK8C,kBAAkBZ,GACvC,GAAgB,IAAZiB,EAAe,CACf,IAAKnD,KAAKoD,aAAc,CACpB,IAAKpD,KAAK8B,YAEN,YADAlB,EAAOR,MAAM,wDAGXlD,EAAqB8C,KAAK8B,aAChC,MAAQuB,QAASC,SAAuBC,OAAO,oBAC/CvD,KAAKoD,aAAe,IAAIE,CAChD,CACqD,IAA7BtD,KAAKmC,sBACLnC,KAAKwD,aAAaC,UAClBzD,KAAKuC,eAEwB,IAA7BvC,KAAKmC,qBAA8BnC,KAAKoD,aAAaM,SAI/C1D,KAAKoD,aAAaO,oBAAoBT,EAAkBhB,SAHxDlC,KAAKoD,aAAaQ,KAAK,SAAUV,EAAkBhB,EAKjF,KACqB,CACD,IAAKlC,KAAK+B,YAEN,YADAnB,EAAOR,MAAM,wDAGXlD,EAAqB8C,KAAK+B,aAChC,MAAQ8B,YAAaC,SAAuBP,OAAO,qBACnDvD,KAAKwD,aAAe,IAAIM,EACS,IAA7B9D,KAAKmC,sBACLnC,KAAKoD,aAAaW,UAClB/D,KAAKuC,eAEwB,IAA7BvC,KAAKmC,qBAA8BnC,KAAKwD,aAAaQ,aAAaC,GAAG,GAMrEjE,KAAKwD,aAAaU,YAAYhB,IAL9BlD,KAAKwD,aAAaW,aAClBnE,KAAKwD,aAAaU,YAAYhB,GAC9BlD,KAAKwD,aAAaY,MAK1C,CACgBxD,EAAOH,KAAK,SAASyC,qBAAoCC,aACzDnD,KAAKmC,oBAAsBgB,CAC3C,CACY,MAAOkB,GACH9D,QAAQH,MAAM,oBAAqBiE,EACnD,CACYrE,KAAKoC,SAAU,CApD3B,CAqDA,GACA,CACI,SAAAkC,CAAUjE,GACN,OAAOQ,EAAUb,UAAM,OAAQ,GAAQ,YACnC,MAAMuE,QAAyBvE,KAAKwC,eAAexC,KAAKgC,UAAYhC,KAAKkC,oBACnElC,KAAKiD,WAAWjD,KAAKgC,UAAWuC,GACtCtG,EAAYoC,EAAS,IAAM,GACvC,GACA,EC7HA,IAAIQ,EAAab,MAAQA,KAAKa,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAI3D,WAAU,SAAUC,EAASC,GAC/C,SAAS2D,EAAUC,GAAS,IAAMC,EAAKH,EAAUI,KAAKF,GAAU,CAAC,MAAOG,GAAK/D,EAAO+D,EAAK,CAAA,CACzF,SAASC,EAASJ,GAAS,IAAMC,EAAKH,EAAiB,MAAEE,GAAU,CAAC,MAAOG,GAAK/D,EAAO+D,EAAK,CAAA,CAC5F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOnE,EAAQkE,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBH,EAAIG,EAAQ,IAAIH,GAAE,SAAU1D,GAAWA,EAAQ6D,EAAS,KAIlBO,KAAKR,EAAWK,EAAU,CAC5GH,GAAMH,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKM,OACtE,GACA,EAEA,MAAMmD,EACF,WAAA1E,GACIE,KAAKyE,MAAQ,CACT,CACIC,KAAM,OACNC,KCfG,uqBDgBHC,SAAU,IAAM/D,EAAUb,UAAM,OAAQ,GAAQ,YAAgB,KAEpE,CACI0E,KAAM,gBACNC,KCnBO,unBDoBPC,SAAU,KACN,GAAIC,OAAOC,UACFD,OAAOE,mBACRF,OAAOE,iBAAmB,IAC9BF,OAAOE,iBAAiBC,KAAK,IAAIH,OAAOC,eAEvC,CACD,MAAMG,EAASxH,SAASC,cAAc,UACtCuH,EAAOtH,IACH,uEACJF,SAASK,KAAKC,YAAYkH,EAClD,IAGY,CACIP,KAAM,OACNC,KCnCO,ojBDoCPC,SAAU,KACNM,KAAK,+DAGb,CACIR,KAAM,OACNC,KCzCC,mkBD0CDC,SAAU,KACNO,aAAahG,QAAQ,gBAAiBiG,KAAKC,MAAMC,YACjD,MAAMC,EAAQ9H,SAAS6B,eAAe,SACjCiG,IAELA,EAAM/F,UAAUI,OAAO,gBACvBF,YAAW,KACP6F,EAAM/F,UAAUC,IAAI,gBACpB,MAAM+F,EAAc/H,SAAS6B,eAAe,gBAC5CkG,SAA0DA,EAAYhG,UAAUC,IAAI,yBACrF,MAIvB,CACI,UAAAgG,CAAWC,EAAKhB,EAAMC,EAAMC,GACxB,MAAMe,EAAUlI,SAASC,cAAc,QACvCiI,EAAQC,GAAK,cAAcF,IAC3BC,EAAQE,MAAQnB,EAChBiB,EAAQpG,UAAYoF,EACpBgB,EAAQG,iBAAiB,QAASlB,GAClC,MAAMmB,EAAgBtI,SAAS6B,eAAe,cAC9C,IAAKyG,EACD,OAAOJ,EACX,MAAMK,EAAWvI,SAAS6B,eAAe,cAAcoG,EAAM,KAE7D,OADAK,EAAcE,aAAaN,EAASK,GAAY,MACzCL,CACf,CACI,aAAAO,CAAcR,GACV,MAAMC,EAAUlI,SAAS6B,eAAe,cAAcoG,KAClDC,EACAA,EAAQ/F,SAGRW,QAAQC,KAAK,8BAA8BkF,eAEvD,CACI,SAAAS,GACI,IAAK,IAAIC,EAAI,EAAGA,EAAIpG,KAAKyE,MAAMvF,OAAQkH,IAAK,CACxC,MAAM1B,KAAEA,EAAIC,KAAEA,EAAIC,SAAEA,GAAa5E,KAAKyE,MAAM2B,GAC5CpG,KAAKyF,WAAWW,EAAG1B,EAAMC,EAAMC,EAC3C,CACA,CACI,iBAAOyB,CAAWC,EAAUZ,EAAKa,GACzBD,EAAS7B,MAAMiB,IACfnF,QAAQG,IAAI,gCAAgCgF,kBAAoBY,EAAS7B,MAAMiB,GAAKhB,QAExF4B,EAAS7B,MAAMiB,GAAOa,EACtBD,EAASJ,cAAcR,GACvBY,EAASb,WAAWC,EAAKa,EAAS7B,KAAM6B,EAAS5B,KAAM4B,EAAS3B,SACxE,CACI,iBAAO4B,CAAWF,EAAUZ,GACxBY,EAASJ,cAAcR,EAC/B,CACI,cAAOe,CAAQH,EAAUZ,EAAKa,GACtBD,EAAS7B,MAAMiB,IACfnF,QAAQC,KAAK,oBAAoBkF,kCAErCY,EAAS7B,MAAMiB,GAAOa,EACtBD,EAASb,WAAWC,EAAKa,EAAS7B,KAAM6B,EAAS5B,KAAM4B,EAAS3B,SACxE,EEzGA,IAAI/D,EAAab,MAAQA,KAAKa,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAI3D,WAAU,SAAUC,EAASC,GAC/C,SAAS2D,EAAUC,GAAS,IAAMC,EAAKH,EAAUI,KAAKF,GAAU,CAAC,MAAOG,GAAK/D,EAAO+D,EAAK,CAAA,CACzF,SAASC,EAASJ,GAAS,IAAMC,EAAKH,EAAiB,MAAEE,GAAU,CAAC,MAAOG,GAAK/D,EAAO+D,EAAK,CAAA,CAC5F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOnE,EAAQkE,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBH,EAAIG,EAAQ,IAAIH,GAAE,SAAU1D,GAAWA,EAAQ6D,EAAS,KAIlBO,KAAKR,EAAWK,EAAU,CAC5GH,GAAMH,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKM,OACtE,GACA,EAMA,SAASqF,EAAW7E,GAChB,OAAOhB,EAAUb,UAAM,OAAQ,GAAQ,YACnC,IAAI6C,EACJsC,aAAaxF,WAAW,iBACxBnB,eAAemB,WAAW,0BAC1BlC,SAASkJ,KAAKC,mBAAmB,YAAa,yNAO9C,MAAMC,QAAcjF,EAAaU,YAAYT,SACvCgF,EAAMvC,UAAU,IACtB,MAAMG,EAAQ,IAAID,EAKlB,OAJAC,EAAM0B,YACFtE,EAAOiF,MC9BnB,WACI,MAAMnB,EAAUlI,SAAS6B,eAAe,SACxC,IAAKqG,EACD,OACJ,IAAIoB,EAAWlC,OAAOmC,WAAYC,EAAYpC,OAAOqC,YACrD,MAAMC,EAAWxB,EAAQyB,YAAaC,EAAY1B,EAAQ2B,aAC1D3B,EAAQG,iBAAiB,aAAayB,IAClC,GAAqB,IAAjBA,EAAMC,OACN,OAEJ,MAAMC,EAAShK,SAAS6B,eAAe,UACvC,GAAIiI,EAAMG,SAAWD,EACjB,OACJF,EAAMI,iBACN,MAAMC,EAAWL,EAAMM,QAASC,EAAWP,EAAMQ,QACjDtK,SAASuK,YAAcT,IACnB,MAAMU,EAAKV,EAAMW,QAASC,EAAKZ,EAAMa,QACrC,IAAIC,EAAQJ,EAAKL,EAAUU,EAAOH,EAAKL,EACnCQ,EAAO,EACPA,EAAO,EAEFA,GAAQrB,EAAYI,IACzBiB,EAAOrB,EAAYI,GAEnBgB,EAAQ,EACRA,EAAQ,EAEHA,GAAStB,EAAWI,IACzBkB,EAAQtB,EAAWI,GAEvBxB,EAAQ4C,MAAMC,IAAMF,EAAO,KAC3B3C,EAAQ4C,MAAME,KAAOJ,EAAQ,MAEjC5K,SAASiL,UAAY,KACjBjL,SAASuK,YAAc,SAG/BnD,OAAO8D,SAAW,KACd5B,EAAWlC,OAAOmC,WAClBC,EAAYpC,OAAOqC,YAE3B,CDVY0B,GACwC,QAA3C/F,EAAKpF,SAAS6B,eAAe,gBAA6B,IAAPuD,GAAyBA,EAAGrD,UAAUC,IAAI,gBACvF,CAAEmC,aAAgBiF,EAAOrC,aAAgBC,EACxD,GACA,CEhCAI,OAAOgE,WFiCP,SAAoBhH,GAChB,IAAIiH,EACJ,GAAsB,iBAAXjH,EAEP,YADAjB,EAAOR,MAAM,+IAGjB3C,SAASkJ,KAAKC,mBAAmB,YAAa,gqBAG9C,MAAMmC,EAAStL,SAAS6B,eAAe,gBA6BvC,OA5BAyJ,SAAgDA,EAAOjD,iBAAiB,SAAS,KAC7E,IAAIjD,EACJkG,SAAgDA,EAAOvJ,UAAUI,OAAO,wBACpEmJ,aAAuC,EAASA,EAAOC,aAAa,gBACpEpI,EAAOH,KAAK,gDACZqI,EAAUpC,EAAW7E,GACrBkH,SAAgDA,EAAOE,gBAAgB,gBAGvE9D,aAAaxF,WAAW,iBACoB,QAA3CkD,EAAKpF,SAAS6B,eAAe,gBAA6B,IAAPuD,GAAyBA,EAAGrD,UAAUI,OAAO,gBACjGF,YAAW,KACP,IAAImD,EACwC,QAA3CA,EAAKpF,SAAS6B,eAAe,gBAA6B,IAAPuD,GAAyBA,EAAGrD,UAAUC,IAAI,kBAC/F,OAGP0F,aAAa1G,QAAQ,kBACrB2G,KAAKC,MAAQ6D,OAAO/D,aAAa1G,QAAQ,mBAAqB,OAC9DsK,SAAgDA,EAAOI,aAAa,aAAc,QAClFzJ,YAAW,KACPqJ,SAAgDA,EAAOvJ,UAAUC,IAAI,yBACtE,KAGHmB,EAAOH,KAAK,4CACZqI,EAAUpC,EAAW7E,IAElBiH,CACX,EEvEAjE,OAAOwB,WAAa7B,EAAa6B,WACjCxB,OAAO4B,QAAUjC,EAAaiC,QAC9B5B,OAAO2B,WAAahC,EAAagC,WACjC3B,OAAO5G,YAAcA"}